<html>
<head>
  <title>Do Not Wake Up the Emoji - Full Expansion</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background-color: #f7f0e6;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Poppins', sans-serif;
      color: #2c2c2c;
      overflow: hidden;
    }
    .top-bar {
      width: 100%;
      background-color: #ffffff;
      padding: 18px 0;
      text-align: center;
      z-index: 10;
    }
    .message {
      font-size: 26px;
      font-weight: 600;
    }
    .emoji-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .emoji {
      font-size: 150px;
      transition: all 0.4s ease;
      cursor: pointer;
      user-select: none;
    }
    .emoji.active {
      transform: scale(1.2);
    }
    .sleepy-text {
      font-size: 24px;
      opacity: 0;
      transition: opacity 0.5s ease;
      text-align: center;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      z-index: 100;
    }
    .overlay-text {
      color: white;
      font-size: 36px;
      text-align: center;
    }
    .secret-timer {
      position: fixed;
      bottom: 20px;
      left: 20px;
      font-size: 16px;
      color: #8a8a8a;
      z-index: 10;
    }
    .progress-bar {
      position: fixed;
      bottom: 10px;
      width: 80%;
      height: 20px;
      background-color: #ddd;
    }
    .progress {
      height: 100%;
      background-color: #4caf50;
      width: 100%;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="message">Do Not Wake Up The Emoji</div>
  </div>
  <div class="emoji-container">
    <div class="emoji" id="sleepyEmoji">ðŸ˜´</div>
    <div class="sleepy-text" id="sleepyText"></div>
  </div>

  <!-- Multiple Overlays for Different Endings -->
  <div class="overlay" id="arrestOverlay">
    <div class="overlay-text">You've been arrested by the Emoji Police! Bad Ending!</div>
  </div>
  <div class="overlay" id="goodEndingOverlay">
    <div class="overlay-text">Good Ending! The emoji fell back asleep.</div>
  </div>
  <div class="overlay" id="friendshipEndingOverlay">
    <div class="overlay-text">Friendship Ending! You've become friends with the emoji.</div>
  </div>
  <div class="overlay" id="heroEndingOverlay">
    <div class="overlay-text">Hero Ending! You saved the emoji from getting too angry.</div>
  </div>
  <div class="overlay" id="boredEndingOverlay">
    <div class="overlay-text">Bored Ending! The emoji got bored and left.</div>
  </div>
  <div class="overlay" id="adventurerEndingOverlay">
    <div class="overlay-text">Adventurer Ending! You've discovered all the secrets.</div>
  </div>
  <div class="overlay" id="timeTravelerEndingOverlay">
    <div class="overlay-text">Time Traveler Ending! You've played over multiple days.</div>
  </div>

  <!-- Secret Timer -->
  <div class="secret-timer" id="secretTimer">Secret Ending Timer: 24:00:00</div>

  <!-- Health/Patience Bar -->
  <div class="progress-bar">
    <div class="progress" id="healthBar"></div>
  </div>

  <script>
    let tapCount = 0;
    let lastTapTime = Date.now();
    let gameStartTime = Date.now();
    let health = 100;  // Initial health or patience
    const emoji = document.getElementById('sleepyEmoji');
    const text = document.getElementById('sleepyText');
    const healthBar = document.getElementById('healthBar');
    const arrestOverlay = document.getElementById('arrestOverlay');
    const goodEndingOverlay = document.getElementById('goodEndingOverlay');
    const friendshipEndingOverlay = document.getElementById('friendshipEndingOverlay');
    const heroEndingOverlay = document.getElementById('heroEndingOverlay');
    const boredEndingOverlay = document.getElementById('boredEndingOverlay');
    const adventurerEndingOverlay = document.getElementById('adventurerEndingOverlay');
    const timeTravelerEndingOverlay = document.getElementById('timeTravelerEndingOverlay');
    const secretTimer = document.getElementById('secretTimer');
    
    const emojis = ['ðŸ˜´', 'ðŸ˜’', 'ðŸ˜ ', 'ðŸ˜¡', 'ðŸ¤¬'];
    const backgroundColors = ['#f7f0e6', '#fbe8d3', '#f5c9c3', '#ff8a8a', '#ff4c4c'];

    emoji.addEventListener('click', () => {
      tapCount++;
      lastTapTime = Date.now();

      // Update emoji expression and background color based on tap count
      const emojiIndex = Math.min(Math.floor(tapCount / 5), emojis.length - 1);
      emoji.textContent = emojis[emojiIndex];
      document.body.style.backgroundColor = backgroundColors[emojiIndex];

      // Update message text
      if (tapCount === 1) {
        text.textContent = "zzzzzz... let me sleep...";
      } else if (tapCount === 5) {
        text.textContent = "This is getting annoying!";
      } else if (tapCount === 10) {
        text.textContent = "Stop poking me!";
      } else if (tapCount === 15) {
        text.textContent = "That's it! I'm calling the police!";
        callPolice();
      }

      // Update health bar
      health -= 5;  // Reduce health with each tap
      healthBar.style.width = health + '%';

      // Check for defender ending (player saves emoji from getting too angry)
      if (tapCount >= 20 && health > 50) {
        showOverlay(heroEndingOverlay);
      }

      // Bored Ending (no action for too long)
      if (tapCount === 0 && (Date.now() - lastTapTime) > 300000) {
        showOverlay(boredEndingOverlay);
      }

      // Time Traveler Ending (track multiple sessions)
      if ((Date.now() - gameStartTime) > 86400000) {
        showOverlay(timeTravelerEndingOverlay);
      }

      // Mini-Quest Example: Tap 10 times exactly for the adventurer ending
      if (tapCount === 10 && health === 50) {
        showOverlay(adventurerEndingOverlay);
      }

      text.style.opacity = '1';
      setTimeout(() => {
        text.style.opacity = '0';
      }, 3000);
    });

    function callPolice() {
      setTimeout(() => {
        arrestOverlay.style.opacity = '1';
        emoji.style.opacity = '0';
        text.style.opacity = '0';
      }, 1000);
    }

    function showOverlay(overlayElement) {
      overlayElement.style.opacity = '1';
      setTimeout(() => {
        overlayElement.style.opacity = '0';
      }, 5000);
    }

    function checkEndings() {
      const currentTime = Date.now();

      // Good Ending (wait 2 minutes without tapping)
      if (tapCount === 14 && (currentTime - lastTapTime) >= 120000) {
        goodEndingOverlay.style.opacity = '1';
        emoji.textContent = 'ðŸ˜´';
        return;
      }

      // True Ending (wait 24 hours without tapping)
      if (tapCount === 0 && (currentTime - gameStartTime) >= 86400000) {
        timeTravelerEndingOverlay.style.opacity = '1';
        emoji.textContent = 'ðŸ§ž';
        return;
      }

      requestAnimationFrame(checkEndings);
    }

    function updateSecretTimer() {
      const currentTime = Date.now();
      const elapsedTime = currentTime - gameStartTime;
      const remainingTime = Math.max(86400000 - elapsedTime, 0);

      const hours = Math.floor(remainingTime / 3600000);
      const minutes = Math.floor((remainingTime % 3600000) / 60000);
      const seconds = Math.floor((remainingTime % 60000) / 1000);

      secretTimer.textContent = `Secret Ending Timer: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

      if (remainingTime > 0) {
        requestAnimationFrame(updateSecretTimer);
      } else {
        secretTimer.textContent = 'Secret Ending Timer: 00:00:00';
      }
    }

    checkEndings();
    updateSecretTimer();
  </script>
</body>
</html>
