<html>
<head>
  <title>Do Not Wake Up the Emoji - Expanded Features</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background-color: #f7f0e6;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Poppins', sans-serif;
      color: #2c2c2c;
      overflow: hidden;
    }
    .top-bar {
      width: 100%;
      background-color: #ffffff;
      padding: 3vh 0;
      text-align: center;
      z-index: 10;
    }
    .message {
      font-size: 5vw;
      font-weight: 600;
    }
    .emoji-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .emoji {
      font-size: 30vw;
      transition: all 0.4s ease;
      cursor: pointer;
      user-select: none;
    }
    .emoji.active {
      transform: scale(1.2);
    }
    .sleepy-text {
      font-size: 4.5vw;
      opacity: 0;
      transition: opacity 0.5s ease;
      text-align: center;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      z-index: 100;
      text-align: center;
      flex-direction: column;
    }
    .overlay-text {
      color: white;
      font-size: 6vw;
      margin-bottom: 4vh;
    }
    .restart-button {
      background-color: #ffffff;
      color: #2c2c2c;
      padding: 2vh 5vw;
      border: none;
      font-size: 4.5vw;
      cursor: pointer;
      border-radius: 8px;
    }
    .difficulty-button {
      background-color: #4caf50;
      color: #ffffff;
      padding: 1vh 3vw;
      border: none;
      font-size: 4vw;
      cursor: pointer;
      border-radius: 5px;
      margin: 2vw;
    }
    .progress-bar {
      position: fixed;
      bottom: 5vh;
      width: 80%;
      height: 4vh;
      background-color: #ddd;
    }
    .progress {
      height: 100%;
      background-color: #4caf50;
      width: 100%;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="message">Do Not Wake Up The Emoji</div>
  </div>
  <div class="emoji-container">
    <div class="emoji" id="sleepyEmoji">😴</div>
    <div class="sleepy-text" id="sleepyText"></div>
  </div>

  <!-- Difficulty Selection -->
  <div class="overlay" id="difficultyOverlay">
    <div class="overlay-text">Choose Your Difficulty</div>
    <button class="difficulty-button" onclick="startGame('easy')">Easy</button>
    <button class="difficulty-button" onclick="startGame('medium')">Medium</button>
    <button class="difficulty-button" onclick="startGame('hard')">Hard</button>
  </div>

  <!-- Multiple Overlays for Endings -->
  <div class="overlay" id="badEndingOverlay">
    <div class="overlay-text">Bad Ending! You upset the emoji!</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>
  <div class="overlay" id="goodEndingOverlay">
    <div class="overlay-text">Good Ending! The emoji fell back asleep.</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>
  <div class="overlay" id="comboMasterEndingOverlay">
    <div class="overlay-text">Combo Master Ending! You achieved the perfect combo streak!</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>
  <div class="overlay" id="collectorEndingOverlay">
    <div class="overlay-text">Collector Ending! You unlocked all emojis!</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>
  <div class="overlay" id="mysteryEmojiEndingOverlay">
    <div class="overlay-text">Mystery Emoji Unlocked!</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>

  <!-- Health/Patience Bar -->
  <div class="progress-bar">
    <div class="progress" id="healthBar"></div>
  </div>

  <script>
    let tapCount = 0;
    let lastTapTime = Date.now();
    let gameStartTime = Date.now();
    let health = 100;
    let comboCount = 0;
    let difficultyMultiplier = 1; // Multiplier for health drain based on difficulty
    const emoji = document.getElementById('sleepyEmoji');
    const text = document.getElementById('sleepyText');
    const healthBar = document.getElementById('healthBar');
    const badEndingOverlay = document.getElementById('badEndingOverlay');
    const goodEndingOverlay = document.getElementById('goodEndingOverlay');
    const comboMasterEndingOverlay = document.getElementById('comboMasterEndingOverlay');
    const collectorEndingOverlay = document.getElementById('collectorEndingOverlay');
    const mysteryEmojiEndingOverlay = document.getElementById('mysteryEmojiEndingOverlay');
    const difficultyOverlay = document.getElementById('difficultyOverlay');

    const emojis = ['😴', '😒', '😠', '😡', '🤬', '😎', '👽', '🦸‍♂️'];
    const backgroundColors = ['#f7f0e6', '#fbe8d3', '#f5c9c3', '#ff8a8a', '#ff4c4c', '#fff68f', '#98fb98', '#87ceeb'];

    function startGame(difficulty) {
      difficultyOverlay.style.display = 'none';
      switch(difficulty) {
        case 'easy':
          difficultyMultiplier = 1;
          break;
        case 'medium':
          difficultyMultiplier = 1.5;
          break;
        case 'hard':
          difficultyMultiplier = 2;
          break;
      }
      resetGame();
    }

    emoji.addEventListener('click', () => {
      tapCount++;
      lastTapTime = Date.now();

      // Combo Bonus: If player taps quickly and keeps emoji calm
      if (comboCount < 10 && health > 50) {
        comboCount++;
        if (comboCount === 10) {
          health = Math.min(100, health + 20); // Restore some health
          showOverlay(comboMasterEndingOverlay);
        }
      }

      // Update emoji expression and background color based on tap count
      const emojiIndex = Math.min(Math.floor(tapCount / 5), emojis.length - 1);
      emoji.textContent = emojis[emojiIndex];
      document.body.style.backgroundColor = backgroundColors[emojiIndex];

      // Mystery Emoji Ending after 50 taps
      if (tapCount === 50) {
        showOverlay(mysteryEmojiEndingOverlay);
      }

      // Update health bar
      health -= 5 * difficultyMultiplier;  // Drain health faster on harder difficulties
      healthBar.style.width = health + '%';

      // Check for bad ending (emoji becomes too angry)
      if (health <= 0) {
        showOverlay(badEndingOverlay);
      }

      // Check for collector ending (player reaches the last emoji)
      if (emojiIndex === emojis.length - 1) {
        showOverlay(collectorEndingOverlay);
      }

      text.style.opacity = '1';
      setTimeout(() => {
        text.style.opacity = '0';
      }, 3000);
    });

    function showOverlay(overlayElement) {
      overlayElement.style.opacity = '1';
      overlayElement.style.pointerEvents = 'all';
    }

    function restartGame() {
      resetGame();
      hideAllOverlays();
    }

    function resetGame() {
      tapCount = 0;
      health = 100;
      comboCount = 0;
      emoji.textContent = '😴';
      document.body.style.backgroundColor = '#f7f0e6';
      healthBar.style.width = '100%';
      text.textContent = '';
      text.style.opacity = '0';
    }

    function hideAllOverlays() {
      [badEndingOverlay, goodEndingOverlay, comboMasterEndingOverlay, collectorEndingOverlay, mysteryEmojiEndingOverlay].forEach(overlay => {
        overlay.style.opacity = '0';
        overlay.style.pointerEvents = 'none';
      });
    }
  </script>
</body>
</html>


