<html>
<head>
  <title>Do Not Wake Up the Emoji - Mobile Optimized</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background-color: #f7f0e6;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Poppins', sans-serif;
      color: #2c2c2c;
      overflow: hidden;
    }
    .top-bar {
      width: 100%;
      background-color: #ffffff;
      padding: 3vh 0;
      text-align: center;
      z-index: 10;
    }
    .message {
      font-size: 5vw; /* Adjusted for mobile */
      font-weight: 600;
    }
    .emoji-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .emoji {
      font-size: 30vw; /* Responsive font size for mobile */
      transition: all 0.4s ease;
      cursor: pointer;
      user-select: none;
    }
    .emoji.active {
      transform: scale(1.2);
    }
    .sleepy-text {
      font-size: 4.5vw;
      opacity: 0;
      transition: opacity 0.5s ease;
      text-align: center;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      z-index: 100;
      text-align: center;
      flex-direction: column;
    }
    .overlay-text {
      color: white;
      font-size: 6vw; /* Optimized for mobile */
      margin-bottom: 4vh;
    }
    .restart-button {
      background-color: #ffffff;
      color: #2c2c2c;
      padding: 2vh 5vw;
      border: none;
      font-size: 4.5vw; /* Mobile-friendly size */
      cursor: pointer;
      border-radius: 8px;
    }
    .progress-bar {
      position: fixed;
      bottom: 5vh;
      width: 80%;
      height: 4vh;
      background-color: #ddd;
    }
    .progress {
      height: 100%;
      background-color: #4caf50;
      width: 100%;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="message">Do Not Wake Up The Emoji</div>
  </div>
  <div class="emoji-container">
    <div class="emoji" id="sleepyEmoji">ðŸ˜´</div>
    <div class="sleepy-text" id="sleepyText"></div>
  </div>

  <!-- Multiple Overlays for Endings -->
  <div class="overlay" id="badEndingOverlay">
    <div class="overlay-text">Bad Ending! You upset the emoji!</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>
  <div class="overlay" id="goodEndingOverlay">
    <div class="overlay-text">Good Ending! The emoji fell back asleep.</div>
    <button class="restart-button" onclick="restartGame()">Restart Game</button>
  </div>

  <!-- Health/Patience Bar -->
  <div class="progress-bar">
    <div class="progress" id="healthBar"></div>
  </div>

  <script>
    let tapCount = 0;
    let lastTapTime = Date.now();
    let gameStartTime = Date.now();
    let health = 100;  // Initial health/patience value
    const emoji = document.getElementById('sleepyEmoji');
    const text = document.getElementById('sleepyText');
    const healthBar = document.getElementById('healthBar');
    const badEndingOverlay = document.getElementById('badEndingOverlay');
    const goodEndingOverlay = document.getElementById('goodEndingOverlay');

    const emojis = ['ðŸ˜´', 'ðŸ˜’', 'ðŸ˜ ', 'ðŸ˜¡', 'ðŸ¤¬'];
    const backgroundColors = ['#f7f0e6', '#fbe8d3', '#f5c9c3', '#ff8a8a', '#ff4c4c'];

    emoji.addEventListener('click', () => {
      tapCount++;
      lastTapTime = Date.now();

      // Update emoji expression and background color based on tap count
      const emojiIndex = Math.min(Math.floor(tapCount / 5), emojis.length - 1);
      emoji.textContent = emojis[emojiIndex];
      document.body.style.backgroundColor = backgroundColors[emojiIndex];

      // Update message text
      if (tapCount === 1) {
        text.textContent = "zzzzzz... let me sleep...";
      } else if (tapCount === 5) {
        text.textContent = "This is getting annoying!";
      } else if (tapCount === 10) {
        text.textContent = "Stop poking me!";
      } else if (tapCount === 15) {
        text.textContent = "That's it! I'm calling the police!";
        triggerBadEnding();  // Trigger bad ending
      }

      // Update health bar
      health -= 5;  // Reduce health with each tap
      healthBar.style.width = health + '%';

      text.style.opacity = '1';
      setTimeout(() => {
        text.style.opacity = '0';
      }, 3000);
    });

    function triggerBadEnding() {
      badEndingOverlay.style.opacity = '1';
      badEndingOverlay.style.pointerEvents = 'all';
    }

    function triggerGoodEnding() {
      goodEndingOverlay.style.opacity = '1';
      goodEndingOverlay.style.pointerEvents = 'all';
    }

    function restartGame() {
      // Reset game state
      tapCount = 0;
      health = 100;
      emoji.textContent = 'ðŸ˜´';
      document.body.style.backgroundColor = '#f7f0e6';
      healthBar.style.width = '100%';
      text.textContent = '';
      text.style.opacity = '0';

      // Hide any active overlays
      badEndingOverlay.style.opacity = '0';
      goodEndingOverlay.style.opacity = '0';
      badEndingOverlay.style.pointerEvents = 'none';
      goodEndingOverlay.style.pointerEvents = 'none';
    }
  </script>
</body>
</html>

